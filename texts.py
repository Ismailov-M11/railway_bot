from typing import Dict

TEXT: Dict[str, Dict[str, str]] = {
    "ru": {
        "hello_3": "ðŸ‡·ðŸ‡º ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¶/Ð´ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð². Ð¯ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð²Ð°Ð¼ Ð½Ð°Ð¹Ñ‚Ð¸ Ð±Ð¸Ð»ÐµÑ‚Ñ‹ Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÑŽ, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð½Ð¸ Ð¿Ð¾ÑÐ²ÑÑ‚ÑÑ.\n\nðŸ‡ºðŸ‡¿ Salom! Men temir yo'l chiptalarini kuzatib boruvchi botman. Men sizga chiptalarni topishda yordam beraman va ular paydo bo'lganda sizni xabardor qilaman.\n\nðŸ‡¬ðŸ‡§ Hi! I am a bot for tracking railway tickets. I'll help you find tickets and notify you when they appear.",
        "choose_lang": "ðŸŒ Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ·Ñ‹Ðº / Tilni tanlang / Choose language",
        "lang_ru": "ðŸ‡·ðŸ‡º Ð ÑƒÑÑÐºÐ¸Ð¹",
        "lang_uz": "ðŸ‡ºðŸ‡¿ O'zbekcha",
        "lang_en": "ðŸ‡¬ðŸ‡§ English",

        "add": "âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚",
        "my": "ðŸ“‹ ÐœÐ¾Ð¸ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹",
        "settings": "âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",
        "check": "ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹",
        "menu_main": "ðŸ  Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ",

        "cancel": "âŒ ÐžÑ‚Ð¼ÐµÐ½Ð°",
        "back": "â¬…ï¸ ÐÐ°Ð·Ð°Ð´",

        "enter_from": "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð³Ð¾Ñ€Ð¾Ð´Ð°:",
        "enter_to": "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð³Ð¾ Ð³Ð¾Ñ€Ð¾Ð´Ð°:",
        "enter_date": "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð´Ð°Ñ‚Ñƒ (DD.MM.YYYY)",

        "city_not_found": "âŒ ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð½Ð°Ð¹Ñ‚Ð¸ Ð³Ð¾Ñ€Ð¾Ð´. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ñ‘ Ñ€Ð°Ð·.",
        "bad_date": "âŒ ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð´Ð°Ñ‚Ñ‹.",
        "saved": "âœ… ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½.",
        "max_routes": "âŒ Ð£ Ð²Ð°Ñ ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² (5).",

        "no_routes": "ðŸ“­ Ð£ Ð²Ð°Ñ ÐµÑ‰Ñ‘ Ð½ÐµÑ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ñ… Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð².",
        "route_deleted": "ðŸ—‘ ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»Ñ‘Ð½.",
        "delete_confirm": "â“ Ð’Ñ‹ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚?",
        "yes": "âœ… Ð”Ð°",
        "no": "âŒ ÐÐµÑ‚",

        "route_view_title": "ðŸ“ ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ â„–{n}",
        "edit": "âœï¸ Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚",
        "delete": "ðŸ—‘ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚",

        "edit_from": "ðŸ™ Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½ÑƒÑŽ Ñ‚Ð¾Ñ‡ÐºÑƒ",
        "edit_to": "ðŸ Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½ÐµÑ‡Ð½ÑƒÑŽ Ñ‚Ð¾Ñ‡ÐºÑƒ",
        "edit_date": "ðŸ“… Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð´Ð°Ñ‚Ñƒ",
        "updated": "âœ… Ð”Ð°Ð½Ð½Ñ‹Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ñ‹.",

        "settings_title": "âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",
        "settings_lang": "ðŸŒ Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÐ·Ñ‹Ðº",
        "settings_notify": "ðŸ”” Ð¢Ð¸Ð¿ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹",
        "notify_always": "â° ÐšÐ°Ð¶Ð´Ñ‹Ðµ 30 Ð¼Ð¸Ð½ÑƒÑ‚",
        "notify_on_available": "âš¡ Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¿Ð¾ÑÐ²Ð»ÐµÐ½Ð¸Ð¸ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²",
        "settings_saved": "âœ… ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹.",

        "checking": "â³ ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÑŽâ€¦",
        "ticket_none": "âŒ Ð‘Ð¸Ð»ÐµÑ‚Ð¾Ð² Ð½ÐµÑ‚",
        "ticket_yes": "âœ… Ð‘Ð¸Ð»ÐµÑ‚Ñ‹ ÐµÑÑ‚ÑŒ",
        "check_time": "â° ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°: {ts}",
        "trip_time": "â± Ð’ Ð¿ÑƒÑ‚Ð¸: {t}",
        "route_line": "ðŸš† {from_} â†’ {to_}\nðŸ“… {date}\n\n{chk}\n\n{cars}\n\n{status}",
        "cars_empty": "",
        "car_line": "{icon} {type_} â€” {seats} Ð¼ÐµÑÑ‚ â€” Ð¾Ñ‚ {price} ÑÑƒÐ¼",
        "train_number": "ðŸš„ ÐŸÐ¾ÐµÐ·Ð´ {num}",
        "unknown_error": "âš ï¸ ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.",
        "select_route": "ðŸ“‹ Ð’Ð°ÑˆÐ¸ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹:",
        "seats_up": "Ð’ÐµÑ€Ñ…Ð½Ð¸Ðµ",
        "seats_down": "ÐÐ¸Ð¶Ð½Ð¸Ðµ",
        "seats_lateral_up": "Ð‘Ð¾ÐºÐ¾Ð²Ñ‹Ðµ Ð²ÐµÑ€Ñ…Ð½Ð¸Ðµ",
        "seats_lateral_down": "Ð‘Ð¾ÐºÐ¾Ð²Ñ‹Ðµ Ð½Ð¸Ð¶Ð½Ð¸Ðµ",
        "dep_time_label": "ðŸŸ¢ ÐžÑ‚Ð±Ñ‹Ñ‚Ð¸Ðµ",
        "arr_time_label": "ðŸ”´ ÐŸÑ€Ð¸Ð±Ñ‹Ñ‚Ð¸Ðµ",
        "travel_time_label": "â³ Ð’Ñ€ÐµÐ¼Ñ Ð² Ð¿ÑƒÑ‚Ð¸",
        "train_route_label": "ðŸ›¤ {route}",
        "time_h_m": "{h} Ñ‡Ð°ÑÐ¾Ð² {m} Ð¼Ð¸Ð½ÑƒÑ‚",
        "year_suffix": " Ð³Ð¾Ð´Ð°",
        "months": ["", "Ð¯Ð½Ð²Ð°Ñ€Ñ", "Ð¤ÐµÐ²Ñ€Ð°Ð»Ñ", "ÐœÐ°Ñ€Ñ‚Ð°", "ÐÐ¿Ñ€ÐµÐ»Ñ", "ÐœÐ°Ñ", "Ð˜ÑŽÐ½Ñ", "Ð˜ÑŽÐ»Ñ", "ÐÐ²Ð³ÑƒÑÑ‚Ð°", "Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€Ñ", "ÐžÐºÑ‚ÑÐ±Ñ€Ñ", "ÐÐ¾ÑÐ±Ñ€Ñ", "Ð”ÐµÐºÐ°Ð±Ñ€Ñ"],
    },
    "uz": {
        "hello_3": "ðŸ‡·ðŸ‡º ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¶/Ð´ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð². Ð¯ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð²Ð°Ð¼ Ð½Ð°Ð¹Ñ‚Ð¸ Ð±Ð¸Ð»ÐµÑ‚Ñ‹ Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÑŽ, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð½Ð¸ Ð¿Ð¾ÑÐ²ÑÑ‚ÑÑ.\n\nðŸ‡ºðŸ‡¿ Salom! Men temir yo'l chiptalarini kuzatib boruvchi botman. Men sizga chiptalarni topishda yordam beraman va ular paydo bo'lganda sizni xabardor qilaman.\n\nðŸ‡¬ðŸ‡§ Hi! I am a bot for tracking railway tickets. I'll help you find tickets and notify you when they appear.",
        "choose_lang": "ðŸŒ Tilni tanlang:",
        "lang_ru": "ðŸ‡·ðŸ‡º Ð ÑƒÑÑÐºÐ¸Ð¹",
        "lang_uz": "ðŸ‡ºðŸ‡¿ O'zbekcha",
        "lang_en": "ðŸ‡¬ðŸ‡§ English",

        "add": "âž• Yo'nalish qoâ€˜shish",
        "my": "ðŸ“‹ Mening yo'nalishlarim",
        "settings": "âš™ï¸ Sozlamalar",
        "check": "ðŸ” Yo'nalishlarni tekshirish",
        "menu_main": "ðŸ  Bosh sahifa",

        "cancel": "âŒ Bekor qilish",
        "back": "â¬…ï¸ Orqaga",

        "enter_from": "Boshlangâ€˜ich shaharni kiriting:",
        "enter_to": "Yakuniy shaharni kiriting:",
        "enter_date": "Sanani kiriting (DD.MM.YYYY)",

        "city_not_found": "âŒ Shahar topilmadi. Qayta urinib koâ€˜ring.",
        "bad_date": "âŒ Sana formati notoâ€˜gâ€˜ri.",
        "saved": "âœ… Yo'nalish muvaffaqiyatli qoâ€˜shildi.",
        "max_routes": "âŒ Sizda maksimal yo'nalishlar soni (5) mavjud.",

        "no_routes": "ðŸ“­ Sizda hali yo'nalishlar yoâ€˜q.",
        "route_deleted": "ðŸ—‘ Yo'nalish oâ€˜chirildi.",
        "delete_confirm": "â“ Rostdan ham yo'nalishni oâ€˜chirmoqchimisiz?",
        "yes": "âœ… Ha",
        "no": "âŒ Yoâ€˜q",

        "route_view_title": "ðŸ“ Yo'nalish â„–{n}",
        "edit": "âœï¸ Yo'nalishni oâ€˜zgartirish",
        "delete": "ðŸ—‘ Yo'nalishni oâ€˜chirish",

        "edit_from": "ðŸ™ Boshlangâ€˜ich nuqtani oâ€˜zgartirish",
        "edit_to": "ðŸ Yakuniy nuqtani oâ€˜zgartirish",
        "edit_date": "ðŸ“… Sanani oâ€˜zgartirish",
        "updated": "âœ… Maâ€™lumotlar yangilandi.",

        "settings_title": "âš™ï¸ Sozlamalar",
        "settings_lang": "ðŸŒ Tilni oâ€˜zgartirish",
        "settings_notify": "ðŸ”” Bildirishnoma turi",
        "notify_always": "â° Har 30 daqiqada",
        "notify_on_available": "âš¡ Faqat bilet paydo boâ€˜lsa",
        "settings_saved": "âœ… Sozlamalar saqlandi.",

        "checking": "â³ Tekshiryapmanâ€¦",
        "ticket_none": "âŒ Bilet yoâ€˜q",
        "ticket_yes": "âœ… Bilet bor",
        "check_time": "â° Tekshiruv: {ts}",
        "trip_time": "â± Yoâ€˜lda: {t}",
        "route_line": "ðŸš† {from_} â†’ {to_}\nðŸ“… {date}\n\n{chk}\n\n{cars}\n\n{status}",
        "cars_empty": "",
        "car_line": "{icon} {type_} â€” {seats} ta â€” {price} soâ€˜m",
        "train_number": "ðŸš„ Poyezd {num}",
        "unknown_error": "âš ï¸ Xatolik yuz berdi. Keyinroq urinib koâ€˜ring.",
        "select_route": "ðŸ“‹ Sizning yo'nalishlaringiz:",
        "seats_up": "Yuqori",
        "seats_down": "Past",
        "seats_lateral_up": "Yon yuqori",
        "seats_lateral_down": "Yon past",
        "dep_time_label": "ðŸŸ¢ Joâ€˜nash",
        "arr_time_label": "ðŸ”´ Yetib borish",
        "travel_time_label": "â³ Yoâ€˜l vaqti",
        "train_route_label": "ðŸ›¤ {route}",
        "time_h_m": "{h} soat {m} daqiqa",
        "year_suffix": " yil",
        "months": ["", "Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"],
    },
    "en": {
        "hello_3": "ðŸ‡·ðŸ‡º ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¶/Ð´ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð². Ð¯ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð²Ð°Ð¼ Ð½Ð°Ð¹Ñ‚Ð¸ Ð±Ð¸Ð»ÐµÑ‚Ñ‹ Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÑŽ, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð½Ð¸ Ð¿Ð¾ÑÐ²ÑÑ‚ÑÑ.\n\nðŸ‡ºðŸ‡¿ Salom! Men temir yo'l chiptalarini kuzatib boruvchi botman. Men sizga chiptalarni topishda yordam beraman va ular paydo bo'lganda sizni xabardor qilaman.\n\nðŸ‡¬ðŸ‡§ Hi! I am a bot for tracking railway tickets. I'll help you find tickets and notify you when they appear.",
        "choose_lang": "ðŸŒ Choose language:",
        "lang_ru": "ðŸ‡·ðŸ‡º Ð ÑƒÑÑÐºÐ¸Ð¹",
        "lang_uz": "ðŸ‡ºðŸ‡¿ Uzbek",
        "lang_en": "ðŸ‡¬ðŸ‡§ English",

        "add": "âž• Add route",
        "my": "ðŸ“‹ My routes",
        "settings": "âš™ï¸ Settings",
        "check": "ðŸ” Check routes",
        "menu_main": "ðŸ  Main menu",

        "cancel": "âŒ Cancel",
        "back": "â¬…ï¸ Back",

        "enter_from": "Enter departure city:",
        "enter_to": "Enter destination city:",
        "enter_date": "Enter date (DD.MM.YYYY)",

        "city_not_found": "âŒ City not found. Try again.",
        "bad_date": "âŒ Invalid date format.",
        "saved": "âœ… Route created successfully.",
        "max_routes": "âŒ You already have the maximum number of routes (5).",

        "no_routes": "ðŸ“­ You don't have any routes yet.",
        "route_deleted": "ðŸ—‘ Route deleted.",
        "delete_confirm": "â“ Are you sure you want to delete this route?",
        "yes": "âœ… Yes",
        "no": "âŒ No",

        "route_view_title": "ðŸ“ Route #{n}",
        "edit": "âœï¸ Edit route",
        "delete": "ðŸ—‘ Delete route",

        "edit_from": "ðŸ™ Change departure",
        "edit_to": "ðŸ Change destination",
        "edit_date": "ðŸ“… Change date",
        "updated": "âœ… Updated successfully.",

        "settings_title": "âš™ï¸ Settings",
        "settings_lang": "ðŸŒ Change language",
        "settings_notify": "ðŸ”” Notification mode",
        "notify_always": "â° Every 30 minutes",
        "notify_on_available": "âš¡ Only when tickets appear",
        "settings_saved": "âœ… Settings saved.",

        "checking": "â³ Checkingâ€¦",
        "ticket_none": "âŒ No tickets",
        "ticket_yes": "âœ… Tickets available",
        "check_time": "â° Checked: {ts}",
        "trip_time": "â± Travel time: {t}",
        "route_line": "ðŸš† {from_} â†’ {to_}\nðŸ“… {date}\n\n{chk}\n\n{cars}\n\n{status}",
        "cars_empty": "",
        "car_line": "{icon} {type_} â€” {seats} seats â€” from {price} UZS",
        "train_number": "ðŸš„ Train {num}",
        "unknown_error": "âš ï¸ Something went wrong. Please try later.",
        "select_route": "ðŸ“‹ Your routes:",
        "seats_up": "Upper",
        "seats_down": "Lower",
        "seats_lateral_up": "Lat. Upper",
        "seats_lateral_down": "Lat. Lower",
        "dep_time_label": "ðŸŸ¢ Departure",
        "arr_time_label": "ðŸ”´ Arrival",
        "travel_time_label": "â³ Travel time",
        "train_route_label": "ðŸ›¤ {route}",
        "time_h_m": "{h} hours {m} minutes",
        "year_suffix": "",
        "months": ["", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
    },
}

def t(lang: str, key: str) -> str:
    # Special handling for month list? No, just get via key
    val = TEXT.get(lang, TEXT["ru"]).get(key, key)
    return val

def get_month_name(lang: str, month_idx: int) -> str:
    try:
        months = TEXT.get(lang, TEXT["ru"]).get("months", [])
        return months[month_idx]
    except IndexError: # Changed from generic 'except' to specific 'IndexError' for robustness
        return ""
